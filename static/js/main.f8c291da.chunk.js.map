{"version":3,"sources":["config/route-defs.ts","components/layout/layout.tsx","routes/about/about-route.tsx","types.ts","api/client.ts","api/unit-api.ts","routes/units/units.form.ts","routes/units/units.utils.ts","routes/units/components/filter-form.tsx","routes/units/components/unit-list.tsx","routes/units/components/sort-icon.tsx","routes/units/units-route.tsx","App.tsx","index.tsx","../../fkg-list-types/build/fkg-list-types.js"],"names":["routePaths","Container","styled","div","Layout","children","pathname","useLocation","className","to","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","classnames","active","AboutRoute","SortDirection","FormData","client","this","config","a","request","response","data","axios","create","timeout","headers","Accept","UnitApi","cache","filter","fetchUnits","units","star","length","unit","includes","attribute","favorite","keyword","name","code","sort","firstUnit","secondUnit","sortDirection","ascending","sortKey","method","url","map","totalStats","hp","attack","defense","slice","validationSchema","object","string","required","array","of","number","oneOf","descending","Unit","Attribute","blue","red","violet","yellow","Favorite","book","cake","doll","jewel","initialValues","fromQuery","query","params","queryString","parse","form","q","rarity","flat","order","validateYupSchema","then","cast","catch","yupErrors","errors","yupToFormErrors","Object","fromEntries","entries","attr","value","pick","toQuery","stringify","attributeText","favoriteText","Select","select","getSelectValue","toString","defaultValue","FilterForm","useFormikContext","handleChange","values","htmlFor","placeholder","multiple","onChange","UnitListItem","memo","UnitList","SortIcon","search","icon","UnitsRoute","history","useHistory","useState","setUnits","formInitialValues","setFormInitialValues","useEffect","fetchAll","onSubmit","push","enableReinitialize","scope","App","path","library","add","fab","fas","ReactDOM","render","StrictMode","document","getElementById","defineProperty","exports","Enhancement","Family","Upgradability"],"mappings":"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","file":"static/js/main.f8c291da.chunk.js","sourcesContent":["export const routePaths = {\n  units: '/',\n  about: '/about',\n}\n","import { ReactNode } from 'react'\nimport { Link, useLocation } from 'react-router-dom'\nimport classnames from 'classnames'\nimport styled from 'styled-components'\n\nimport { routePaths } from '../../config/route-defs'\n\ninterface Props {\n  children: ReactNode\n}\n\nconst Container = styled.div`\n  min-height: 100vh;\n`\n\nexport default function Layout({ children }: Props) {\n  const { pathname } = useLocation()\n\n  return (\n    <Container>\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light sticky-top\">\n        <div className=\"container\">\n          <Link to={routePaths.units} className=\"navbar-brand\">\n            FKG LIST\n          </Link>\n\n          <button\n            className=\"navbar-toggler\"\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarNav\"\n            aria-controls=\"navbarNav\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <span className=\"navbar-toggler-icon\" />\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\n            <ul className=\"navbar-nav\">\n              <li className=\"nav-item\">\n                <Link\n                  to={routePaths.units}\n                  className={classnames('nav-link', { active: pathname === routePaths.units })}\n                >\n                  Home\n                </Link>\n              </li>\n\n              <li className=\"nav-item\">\n                <Link\n                  to={routePaths.about}\n                  className={classnames('nav-link', { active: pathname === routePaths.about })}\n                >\n                  About\n                </Link>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n\n      <div className=\"container\">{children}</div>\n    </Container>\n  )\n}\n","import Layout from '../../components/layout'\n\nexport default function AboutRoute() {\n  return (\n    <Layout>\n      <div>About</div>\n    </Layout>\n  )\n}\n","import { Unit } from 'fkg-list-types'\n\nexport enum SortDirection {\n  ascending = 'asc',\n  descending = 'desc',\n}\n\nexport namespace FormData {\n  export interface FilterUnits {\n    keyword: string\n    star: Unit.Star[]\n    sortKey: string\n    sortDirection: SortDirection\n    favorite: Unit.Favorite[]\n    attribute: Unit.Attribute[]\n  }\n}\n\nexport interface FlowerKnightGirl extends Unit.Simple {\n  id: string\n  totalStats: number\n}\n","import axios, { AxiosInstance, AxiosRequestConfig } from 'axios'\n\nexport class Client {\n  client: AxiosInstance\n\n  constructor(client: AxiosInstance) {\n    this.client = client\n  }\n\n  async request<Data>(config: AxiosRequestConfig): Promise<Data> {\n    const response = await this.client.request<Data>(config)\n    return response.data\n  }\n}\n\nconst httpClient = axios.create({\n  timeout: 15000,\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n})\n\nexport const client = new Client(httpClient)\n","import { Unit } from 'fkg-list-types'\n\nimport { FlowerKnightGirl, FormData, SortDirection } from '../types'\n\nimport { client } from './client'\n\nclass Api {\n  private cache: FlowerKnightGirl[] | null = null\n\n  async fetchAll(filter: FormData.FilterUnits) {\n    let units = await this.fetchUnits()\n\n    if (filter.star.length > 0) {\n      units = units.filter((unit) => filter.star.includes(unit.star))\n    }\n\n    if (filter.attribute.length > 0) {\n      units = units.filter((unit) => filter.attribute.includes(unit.attribute))\n    }\n\n    if (filter.favorite.length > 0) {\n      units = units.filter((unit) => filter.favorite.includes(unit.favorite))\n    }\n\n    if (filter.keyword) {\n      units = units.filter((unit) => unit.name.includes(filter.keyword) || unit.code.includes(filter.keyword))\n    }\n\n    units.sort((firstUnit, secondUnit) => {\n      if (filter.sortDirection === SortDirection.ascending) {\n        // @ts-expect-error\n        return firstUnit[filter.sortKey] - secondUnit[filter.sortKey]\n      }\n\n      // @ts-expect-error\n      return secondUnit[filter.sortKey] - firstUnit[filter.sortKey]\n    })\n\n    return units\n  }\n\n  private async fetchUnits() {\n    if (!this.cache) {\n      const units = await client.request<Unit.Simple[]>({\n        method: 'get',\n        url: '/units-simple.json',\n      })\n\n      this.cache = units.map((unit) => ({\n        ...unit,\n        id: `${unit.code}-${unit.star}`,\n        totalStats: unit.hp + unit.attack + unit.defense,\n      }))\n    }\n\n    return this.cache.slice()\n  }\n}\n\nexport const UnitApi = new Api()\n","import { array, number, object, SchemaOf, string } from 'yup'\nimport queryString from 'query-string'\nimport { validateYupSchema, yupToFormErrors } from 'formik'\nimport { Unit } from 'fkg-list-types'\n\nimport { FormData, SortDirection } from '../../types'\n\n// @ts-expect-error\nexport const validationSchema: SchemaOf<FormData.FilterUnits> = object({\n  keyword: string().required(),\n  star: array()\n    .of(number().oneOf([2, 3, 4, 5, 6]))\n    .required(),\n  sortKey: string().required().oneOf(['totalStats', 'code']),\n  sortDirection: string().oneOf([SortDirection.ascending, SortDirection.descending]).required(),\n  attribute: array()\n    .of(number().oneOf([Unit.Attribute.blue, Unit.Attribute.red, Unit.Attribute.violet, Unit.Attribute.yellow]))\n    .required(),\n  favorite: array()\n    .of(number().oneOf([Unit.Favorite.book, Unit.Favorite.cake, Unit.Favorite.doll, Unit.Favorite.jewel]))\n    .required(),\n})\n\nexport const initialValues: FormData.FilterUnits = {\n  keyword: '',\n  attribute: [],\n  favorite: [],\n  sortDirection: SortDirection.ascending,\n  sortKey: 'totalStats',\n  star: [],\n}\n\nexport const fromQuery = async (query: string): Promise<FormData.FilterUnits> => {\n  const params = queryString.parse(query)\n  const form = {\n    keyword: params.q,\n    star: params.rarity && [params.rarity].flat(),\n    sortKey: params.sort,\n    sortDirection: params.order,\n    favorite: params.favorite && [params.favorite].flat(),\n    attribute: params.attribute && [params.attribute].flat(),\n  }\n\n  return validateYupSchema(form, validationSchema)\n    .then(() => {\n      return validationSchema.cast(form) as any\n    })\n    .catch((yupErrors, ...args) => {\n      const errors = yupToFormErrors<FormData.FilterUnits>(yupErrors)\n      return Object.fromEntries(\n        Object.entries(initialValues).map(([attr, value]) => {\n          // @ts-expect-error\n          if (errors[attr]) {\n            return [attr, value]\n          }\n\n          return [attr, validationSchema.pick([attr]).cast(form)[attr]]\n        })\n      )\n    })\n}\n\nexport const toQuery = (form: FormData.FilterUnits) => {\n  const params = {\n    q: form.keyword,\n    rarity: form.star,\n    sort: form.sortKey,\n    order: form.sortDirection,\n    favorite: form.favorite,\n    attribute: form.attribute,\n  }\n  return queryString.stringify(params)\n}\n","import { Unit } from 'fkg-list-types'\n\nimport { FlowerKnightGirl } from '../../types'\n\nexport const attributeText = (value: Unit.Attribute): string => {\n  switch (value) {\n    case Unit.Attribute.blue:\n      return '打'\n\n    case Unit.Attribute.red:\n      return '斬'\n\n    case Unit.Attribute.yellow:\n      return '突'\n\n    default:\n      return '魔'\n  }\n}\n\nexport const favoriteText = (value: Unit.Favorite): string => {\n  switch (value) {\n    case Unit.Favorite.cake:\n      return 'ケーキ'\n\n    case Unit.Favorite.book:\n      return '本'\n\n    case Unit.Favorite.doll:\n      return 'ぬいぐるみ'\n\n    default:\n      return '宝石'\n  }\n}\n\nexport const totalStats = (unit: FlowerKnightGirl) => unit.hp + unit.attack + unit.defense\n","import { Unit } from 'fkg-list-types'\nimport { Field, Form, useFormikContext } from 'formik'\nimport { toString } from 'lodash'\nimport styled from 'styled-components'\n\nimport { FormData } from '../../../types'\nimport { attributeText, favoriteText } from '../units.utils'\n\nconst Select = styled.select`\n  min-width: 200px;\n`\n\nconst getSelectValue = (value: any[]) => {\n  if (value.length > 0) {\n    return {\n      value: value.map(toString),\n    }\n  }\n\n  return {\n    defaultValue: [''],\n  }\n}\n\nexport function FilterForm() {\n  const { handleChange, values } = useFormikContext<FormData.FilterUnits>()\n\n  return (\n    <Form className=\"mt-4\">\n      <div className=\"mb-3 row\">\n        <label htmlFor=\"keyword\" className=\"col col-form-label flex-grow-0\">\n          Keyword\n        </label>\n\n        <div className=\"col\">\n          <Field type=\"text\" className=\"form-control\" name=\"keyword\" placeholder=\"Unit ID or Name\" />\n        </div>\n      </div>\n      {/* <div className=\"form-check form-check-inline\">\n        <Field type=\"checkbox\" name=\"star\" value={Unit.Attribute.blue} className=\"form-check-input\" />\n        <label className=\"form-check-label\">{attributeText(Unit.Attribute.blue)}</label>\n      </div>\n      <div className=\"form-check form-check-inline\">\n        <Field type=\"checkbox\" name=\"star\" value={Unit.Attribute.red} className=\"form-check-input\" />\n        <label className=\"form-check-label\">{attributeText(Unit.Attribute.red)}</label>\n      </div>\n      <div className=\"form-check form-check-inline\">\n        <Field type=\"checkbox\" name=\"star\" value={Unit.Attribute.yellow} className=\"form-check-input\" />\n        <label className=\"form-check-label\">{attributeText(Unit.Attribute.yellow)}</label>\n      </div>\n      <div className=\"form-check form-check-inline\">\n        <Field type=\"checkbox\" name=\"star\" value={Unit.Attribute.violet} className=\"form-check-input\" />\n        <label className=\"form-check-label\">{attributeText(Unit.Attribute.violet)}</label>\n      </div> */}\n      <div className=\"row\">\n        <div className=\"col-4 text-center\">\n          <label className=\"mx-auto\">レアリティー</label>\n          <Select\n            className=\"form-select w-auto mx-auto\"\n            multiple\n            aria-label=\"multiple select example\"\n            onChange={handleChange('star')}\n            {...getSelectValue(values.star)}\n          >\n            <option value=\"\">すべて</option>\n            <option value=\"2\">★2</option>\n            <option value=\"3\">★3</option>\n            <option value=\"4\">★4</option>\n            <option value=\"5\">★5</option>\n            <option value=\"6\">★6</option>\n          </Select>\n        </div>\n\n        <div className=\"col-4 text-center\">\n          <label className=\"mx-auto\">属性</label>\n          <Select\n            className=\"form-select w-auto mx-auto\"\n            multiple\n            aria-label=\"multiple select example\"\n            onChange={handleChange('attribute')}\n            {...getSelectValue(values.attribute)}\n          >\n            <option value=\"\">すべて</option>\n            <option value={Unit.Attribute.blue}>{attributeText(Unit.Attribute.blue)}</option>\n            <option value={Unit.Attribute.red}>{attributeText(Unit.Attribute.red)}</option>\n            <option value={Unit.Attribute.yellow}>{attributeText(Unit.Attribute.yellow)}</option>\n            <option value={Unit.Attribute.violet}>{attributeText(Unit.Attribute.violet)}</option>\n          </Select>\n        </div>\n\n        <div className=\"col-4 text-center\">\n          <label className=\"mx-auto\">好きな物</label>\n          <Select\n            className=\"form-select w-auto mx-auto\"\n            multiple\n            aria-label=\"multiple select example\"\n            onChange={handleChange('favorite')}\n            {...getSelectValue(values.favorite)}\n          >\n            <option value=\"\">すべて</option>\n            <option value={Unit.Favorite.book}>{favoriteText(Unit.Favorite.book)}</option>\n            <option value={Unit.Favorite.cake}>{favoriteText(Unit.Favorite.cake)}</option>\n            <option value={Unit.Favorite.doll}>{favoriteText(Unit.Favorite.doll)}</option>\n            <option value={Unit.Favorite.jewel}>{favoriteText(Unit.Favorite.jewel)}</option>\n          </Select>\n        </div>\n      </div>\n\n      <div className=\"text-center my-4\">\n        <button type=\"submit\" className=\"btn btn-primary\">\n          Filter\n        </button>\n      </div>\n    </Form>\n  )\n}\n","import { memo } from 'react'\n\nimport { FlowerKnightGirl } from '../../../types'\nimport { attributeText, favoriteText, totalStats } from '../units.utils'\n\ninterface UnitListItemProps {\n  unit: FlowerKnightGirl\n}\n\nconst UnitListItem = memo(function UnitListItem({ unit }: UnitListItemProps) {\n  return (\n    <tr key={unit.id}>\n      <td>{unit.code}</td>\n      <td>{unit.name}</td>\n      <td>{attributeText(unit.attribute)}</td>\n      <td>★{unit.star}</td>\n      <td>{totalStats(unit)}</td>\n      <td>{unit.hp}</td>\n      <td>{unit.attack}</td>\n      <td>{unit.defense}</td>\n      <td>{favoriteText(unit.favorite)}</td>\n    </tr>\n  )\n})\n\ninterface UnitListProps {\n  units: FlowerKnightGirl[]\n}\n\nexport const UnitList = memo(function UnitList({ units }: UnitListProps) {\n  return (\n    <>\n      {units.map((unit) => (\n        <UnitListItem key={unit.id} unit={unit} />\n      ))}\n    </>\n  )\n})\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { useFormikContext } from 'formik'\nimport { Link } from 'react-router-dom'\n\nimport { routePaths } from '../../../config/route-defs'\nimport { FormData, SortDirection } from '../../../types'\nimport { toQuery } from '../units.form'\n\ninterface Props {\n  sortKey: string\n}\n\nexport function SortIcon({ sortKey }: Props) {\n  const { values } = useFormikContext<FormData.FilterUnits>()\n\n  return (\n    <Link\n      to={{\n        pathname: routePaths.units,\n        search: toQuery({\n          ...values,\n          sortDirection:\n            values.sortDirection === SortDirection.ascending ? SortDirection.descending : SortDirection.ascending,\n          sortKey,\n        }),\n      }}\n    >\n      <FontAwesomeIcon icon=\"sort\" className=\"ms-2\" />\n    </Link>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport { useHistory, useLocation } from 'react-router'\nimport { Formik } from 'formik'\n\nimport Layout from '../../components/layout'\nimport { routePaths } from '../../config/route-defs'\nimport { FlowerKnightGirl, FormData } from '../../types'\nimport { UnitApi } from '../../api/unit-api'\n\nimport { fromQuery, initialValues, toQuery } from './units.form'\nimport { FilterForm } from './components/filter-form'\nimport { UnitList } from './components/unit-list'\nimport { SortIcon } from './components/sort-icon'\n\nexport default function UnitsRoute() {\n  const { search } = useLocation()\n  const history = useHistory()\n  const [units, setUnits] = useState<FlowerKnightGirl[]>([])\n  const [formInitialValues, setFormInitialValues] = useState<FormData.FilterUnits>(initialValues)\n\n  useEffect(() => {\n    async function fetchUnits() {\n      const form = await fromQuery(search)\n      setFormInitialValues(form)\n      const response = await UnitApi.fetchAll(form)\n      setUnits(response)\n    }\n\n    fetchUnits()\n  }, [search, setUnits])\n\n  return (\n    <Layout>\n      <Formik\n        initialValues={formInitialValues}\n        onSubmit={(form) => {\n          history.push({\n            pathname: routePaths.units,\n            search: toQuery(form),\n          })\n        }}\n        enableReinitialize\n      >\n        <>\n          <FilterForm />\n          <table className=\"table table-striped\">\n            <thead>\n              <tr>\n                <th scope=\"col\">\n                  #\n                  <SortIcon sortKey=\"code\" />\n                </th>\n                <th scope=\"col\">名前</th>\n                <th scope=\"col\">属性</th>\n                <th scope=\"col\">レア度</th>\n                <th scope=\"col\">\n                  総合力\n                  <SortIcon sortKey=\"totalStats\" />\n                </th>\n                <th scope=\"col\">HP</th>\n                <th scope=\"col\">攻撃力</th>\n                <th scope=\"col\">防御力</th>\n                <th scope=\"col\">好きな物</th>\n              </tr>\n            </thead>\n            <tbody>\n              <UnitList units={units} />\n            </tbody>\n          </table>\n        </>\n      </Formik>\n    </Layout>\n  )\n}\n","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\n\nimport AboutRoute from './routes/about'\nimport UnitsRoute from './routes/units'\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/about\">\n          <AboutRoute />\n        </Route>\n        <Route path=\"/\">\n          <UnitsRoute />\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\nimport { fas } from '@fortawesome/free-solid-svg-icons'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport './index.css'\nimport App from './App'\n// import reportWebVitals from './reportWebVitals'\n\nlibrary.add(fab, fas)\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals()\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Unit = void 0;\nvar Unit;\n(function (Unit) {\n    var Enhancement;\n    (function (Enhancement) {\n        Enhancement[Enhancement[\"twoSteps\"] = 0] = \"twoSteps\";\n        /**\n         * 開花(能力のみ)\n         */\n        Enhancement[Enhancement[\"threeSteps\"] = 1] = \"threeSteps\";\n        /**\n         * 開花\n         */\n        Enhancement[Enhancement[\"threeStepsWithArt\"] = 2] = \"threeStepsWithArt\";\n    })(Enhancement = Unit.Enhancement || (Unit.Enhancement = {}));\n    var Attribute;\n    (function (Attribute) {\n        /**\n         * 打\n         */\n        Attribute[Attribute[\"blue\"] = 1] = \"blue\";\n        /**\n         * 斬\n         */\n        Attribute[Attribute[\"red\"] = 2] = \"red\";\n        /**\n         * 突\n         */\n        Attribute[Attribute[\"yellow\"] = 3] = \"yellow\";\n        /**\n         * 魔\n         */\n        Attribute[Attribute[\"violet\"] = 4] = \"violet\";\n    })(Attribute = Unit.Attribute || (Unit.Attribute = {}));\n    var Favorite;\n    (function (Favorite) {\n        /**\n         * ケーキ\n         */\n        Favorite[Favorite[\"cake\"] = 1] = \"cake\";\n        /**\n         * 本\n         */\n        Favorite[Favorite[\"book\"] = 2] = \"book\";\n        /**\n         * ぬいぐるみ\n         */\n        Favorite[Favorite[\"doll\"] = 3] = \"doll\";\n        /**\n         * 宝石\n         */\n        Favorite[Favorite[\"jewel\"] = 4] = \"jewel\";\n    })(Favorite = Unit.Favorite || (Unit.Favorite = {}));\n    var Family;\n    (function (Family) {\n        /**\n         * ウィンターローズ\n         */\n        Family[Family[\"winterRose\"] = 1] = \"winterRose\";\n        /**\n         * バナナオーシャン\n         */\n        Family[Family[\"bananaOcean\"] = 2] = \"bananaOcean\";\n        /**\n         * ブロッサムヒル\n         */\n        Family[Family[\"blossomHill\"] = 3] = \"blossomHill\";\n        /**\n         * ベルガモットバレー\n         */\n        Family[Family[\"bergamotValley\"] = 4] = \"bergamotValley\";\n        /**\n         * リリィウッド\n         */\n        Family[Family[\"lilywood\"] = 5] = \"lilywood\";\n        /**\n         * ロータスレイク\n         */\n        Family[Family[\"lotusLake\"] = 6] = \"lotusLake\";\n    })(Family = Unit.Family || (Unit.Family = {}));\n    var Upgradability;\n    (function (Upgradability) {\n        Upgradability[Upgradability[\"none\"] = 0] = \"none\";\n        /**\n         * 昇華\n         */\n        Upgradability[Upgradability[\"promoteToSixStars\"] = 1] = \"promoteToSixStars\";\n    })(Upgradability = Unit.Upgradability || (Unit.Upgradability = {}));\n    // export interface Full {\n    //   code: string\n    //   name: string\n    //   images: [Image, Image, Image]\n    //   star: Star\n    //   enhancement: Enhancement\n    //   attribute: Attribute\n    //   hp: number\n    //   attack: number\n    //   defense: number\n    //   speed: number\n    //   family: string\n    //   favorite: Favorite\n    //   skills: string[]\n    // }\n})(Unit = exports.Unit || (exports.Unit = {}));\n"],"sourceRoot":""}